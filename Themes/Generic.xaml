<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:converters="clr-namespace:Jon.Wpf.CustomControls.Converters"
    xmlns:local="clr-namespace:Jon.Wpf.CustomControls">
    <converters:BoolToIntConverter x:Key="BoolToIntConverter" />
    <converters:BoolToTranslateConverter x:Key="BoolToTranslateConverter" />
    <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
    <converters:BoolToCollapsedConverter x:Key="BoolToCollapsedConverter" />
    <converters:ToggleSwitchForegroundConverter x:Key="ToggleSwitchForegroundConverter" />
    <converters:ToggleSwitchBackgroundConverter x:Key="ToggleSwitchBackgroundConverter" />
    <converters:ToggleSwitchHandleColorConverter x:Key="ToggleSwitchHandleColorConverter" />
    <converters:ColorToBrushConverter x:Key="ColorToBrushConverter" />
    <converters:BrushToColorConverter x:Key="BrushToColorConverter" />
    <converters:HalfSizeConverter x:Key="HalfSizeConverter" />
    <converters:DateTimeToAmPmConverter x:Key="DateTimeToAmPmConverter" />
    <converters:SelectorValuesToDateTimeConverter x:Key="SelectorValuesToDateTimeConverter" />
    <converters:ColorEqualityConverter x:Key="ColorEqualityConverter" />
    <converters:ColorToNameConverter x:Key="ColorToNameConverter" />
    <converters:PropertyNameConverter x:Key="PropertyNameConverter" />
    <SolidColorBrush x:Key="DefaultCategoryColor" Color="#4E94DB" />
    <SolidColorBrush x:Key="DefaultCategoryForeground" Color="White" />
    <SolidColorBrush x:Key="GrayBorderColor" Color="#FFD2D2D2" />
    <SolidColorBrush x:Key="LightGrayBackgroundColor" Color="#FFF8F8F8" />
    <SolidColorBrush x:Key="CategoryColor" Color="#6E9F00" />
    <SolidColorBrush x:Key="CategoryForeground" Color="White" />
    <SolidColorBrush x:Key="RowAlternatingBackground" Color="#F7F7F7" />
    <SolidColorBrush x:Key="BorderBackgroundPropertyValueField" Color="LightGray" />
    <DataTemplate x:Key="DefaultPropertyValueTemplate">
        <TextBox Text="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
    </DataTemplate>

    <DataTemplate x:Key="DateTimePropertyValueTemplate">
        <DatePicker SelectedDate="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
    </DataTemplate>

    <local:PropertyGridValueTemplateSelector
        x:Key="PropertyGridValueTemplateSelector"
        DateTimeTemplate="{StaticResource DateTimePropertyValueTemplate}"
        DefaultTemplate="{StaticResource DefaultPropertyValueTemplate}" />

    <!--  CustomControl1  -->
    <Style TargetType="{x:Type local:CustomControl1}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:CustomControl1}">
                    <Border
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                        <TextBlock
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Text="Hello, Custom Control!" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <!--  ToggleSwitch  -->
    <Style BasedOn="{StaticResource {x:Type ToggleButton}}" TargetType="{x:Type local:ToggleSwitch}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:ToggleSwitch}">
                    <Border
                        MinWidth="60"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                        <Grid x:Name="PART_RootGrid">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock
                                x:Name="PART_OffText"
                                Grid.Column="0"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Text="{Binding OffText, RelativeSource={RelativeSource TemplatedParent}}" />
                            <Grid x:Name="PART_HandleGrid" Grid.Column="1">
                                <Grid.RenderTransform>
                                    <TranslateTransform x:Name="PART_HandleTranslateTransform" />
                                </Grid.RenderTransform>
                                <Rectangle
                                    x:Name="PART_Handle"
                                    Fill="{TemplateBinding Foreground}"
                                    RadiusX="6"
                                    RadiusY="6" />
                            </Grid>
                            <TextBlock
                                x:Name="PART_OnText"
                                Grid.Column="2"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Text="{Binding OnText, RelativeSource={RelativeSource TemplatedParent}}" />
                        </Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal" />
                                <VisualState x:Name="MouseOver" />
                                <VisualState x:Name="Pressed" />
                                <VisualState x:Name="Disabled" />
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="CheckStates">
                                <VisualState x:Name="Checked">
                                    <Storyboard>
                                        <DoubleAnimation
                                            Storyboard.TargetName="PART_HandleTranslateTransform"
                                            Storyboard.TargetProperty="X"
                                            Duration="0:0:0.3" />
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Unchecked">
                                    <Storyboard>
                                        <DoubleAnimation
                                            Storyboard.TargetName="PART_HandleTranslateTransform"
                                            Storyboard.TargetProperty="X"
                                            To="0"
                                            Duration="0:0:0.3" />
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Indeterminate" />
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter TargetName="PART_HandleGrid" Property="Grid.Column" Value="0" />
                            <Setter TargetName="PART_OffText" Property="Visibility" Value="Collapsed" />
                            <Setter TargetName="PART_OnText" Property="Visibility" Value="Visible" />
                            <Setter TargetName="PART_OnText" Property="Foreground" Value="{Binding OnForeground, RelativeSource={RelativeSource TemplatedParent}}" />
                        </Trigger>
                        <Trigger Property="IsChecked" Value="False">
                            <Setter TargetName="PART_HandleGrid" Property="Grid.Column" Value="2" />
                            <Setter TargetName="PART_OffText" Property="Foreground" Value="{Binding OffForeground, RelativeSource={RelativeSource TemplatedParent}}" />
                            <Setter TargetName="PART_OffText" Property="Visibility" Value="Visible" />
                            <Setter TargetName="PART_OnText" Property="Visibility" Value="Collapsed" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="ToggleSwitchStyle1" TargetType="local:ToggleSwitch">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:ToggleSwitch">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <Border
                            x:Name="SwitchTrack"
                            Width="40"
                            Height="20"
                            Margin="0,0,4,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Background="#E0E0E0"
                            BorderBrush="#C0C0C0"
                            BorderThickness="1"
                            CornerRadius="10"
                            SnapsToDevicePixels="True">
                            <ContentPresenter
                                x:Name="OffTextPresenter"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Content="{TemplateBinding OffText}"
                                TextElement.Foreground="{TemplateBinding OffForeground}" />
                        </Border>

                        <Border
                            x:Name="SwitchThumb"
                            Width="20"
                            Height="20"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Background="#00BFFF"
                            BorderBrush="#0066CC"
                            BorderThickness="1"
                            CornerRadius="10"
                            SnapsToDevicePixels="True">
                            <ContentPresenter
                                x:Name="OnTextPresenter"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Content="{TemplateBinding OnText}"
                                TextElement.Foreground="{TemplateBinding OnForeground}" />
                        </Border>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter TargetName="SwitchTrack" Property="Background">
                                <Setter.Value>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Offset="0" Color="#66CCFF" />
                                        <GradientStop Offset="1" Color="#003399" />
                                    </LinearGradientBrush>
                                </Setter.Value>
                            </Setter>
                            <Setter TargetName="SwitchThumb" Property="Margin" Value="24,0,0,0" />
                        </Trigger>
                        <Trigger Property="IsChecked" Value="False">
                            <Setter TargetName="SwitchTrack" Property="Background">
                                <Setter.Value>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Offset="0" Color="#FF6666" />
                                        <GradientStop Offset="1" Color="#FF0000" />
                                    </LinearGradientBrush>
                                </Setter.Value>
                            </Setter>
                            <Setter TargetName="SwitchThumb" Property="Margin" Value="0,0,0,0" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <!--  TimePicker  -->
    <Style TargetType="{x:Type local:TimePicker}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:TimePicker}">
                    <Border
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                        <Grid>
                            <Grid.Resources>
                                <converters:SelectorValuesToDateTimeConverter x:Key="SelectorValuesToDateTimeConverter" />
                            </Grid.Resources>
                            <Grid>
                                <Grid.Resources>
                                    <converters:SelectorValuesToDateTimeConverter x:Key="SelectorValuesToDateTimeConverter" />
                                </Grid.Resources>
                                <StackPanel Orientation="Horizontal">
                                    <ComboBox
                                        x:Name="PART_HourSelector"
                                        Width="50"
                                        Padding="{TemplateBinding Padding}"
                                        VerticalAlignment="Center"
                                        HorizontalContentAlignment="Center"
                                        VerticalContentAlignment="Center"
                                        FontFamily="{TemplateBinding FontFamily}"
                                        FontSize="{TemplateBinding FontSize}"
                                        Foreground="{TemplateBinding Foreground}"
                                        SelectedValue="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=SelectedHour}" />
                                    <TextBlock
                                        Margin="1,0,1,0"
                                        VerticalAlignment="Center"
                                        FontFamily="{TemplateBinding FontFamily}"
                                        FontSize="{TemplateBinding FontSize}"
                                        Foreground="{TemplateBinding Foreground}"
                                        Text=":" />
                                    <ComboBox
                                        x:Name="PART_MinuteSelector"
                                        Width="50"
                                        Padding="{TemplateBinding Padding}"
                                        VerticalAlignment="Center"
                                        HorizontalContentAlignment="Center"
                                        VerticalContentAlignment="Center"
                                        FontFamily="{TemplateBinding FontFamily}"
                                        FontSize="{TemplateBinding FontSize}"
                                        Foreground="{TemplateBinding Foreground}"
                                        SelectedValue="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=SelectedMinute}" />
                                    <ComboBox
                                        x:Name="AmPmSelector"
                                        Width="50"
                                        Margin="2"
                                        Padding="{TemplateBinding Padding}"
                                        VerticalAlignment="Center"
                                        HorizontalContentAlignment="Center"
                                        VerticalContentAlignment="Center"
                                        FontFamily="{TemplateBinding FontFamily}"
                                        FontSize="{TemplateBinding FontSize}"
                                        Foreground="{TemplateBinding Foreground}"
                                        SelectedIndex="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=SelectedAmPm, Mode=TwoWay}"
                                        Visibility="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type local:TimePicker}}, Path=Is24HourFormat, Converter={StaticResource BoolToCollapsedConverter}, ConverterParameter=collapsed}">
                                        <ComboBoxItem Content="AM" />
                                        <ComboBoxItem Content="PM" />
                                    </ComboBox>
                                </StackPanel>
                            </Grid>
                        </Grid>
                    </Border>
                </ControlTemplate>


            </Setter.Value>
        </Setter>
    </Style>
    <!--  ColorPalatteControl  -->
    <Style TargetType="{x:Type local:ColorPaletteControl}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:ColorPaletteControl}">
                    <Grid VerticalAlignment="Top">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Border
                            Grid.RowSpan="2"
                            Margin="0,0,0,5"
                            Background="{Binding Converter={StaticResource ColorToBrushConverter}}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                            <b:Interaction.Triggers>
                                <b:EventTrigger EventName="MouseLeftButtonDown">
                                    <b:InvokeCommandAction Command="{Binding SelectColorCommand}" CommandParameter="{Binding}" />
                                </b:EventTrigger>
                            </b:Interaction.Triggers>
                            <ItemsControl ItemsSource="{TemplateBinding ColorList}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Button
                                            Width="24"
                                            Height="24"
                                            Background="{Binding Converter={StaticResource ColorToBrushConverter}}"
                                            Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:ColorPaletteControl}}, Path=SelectColorCommand}"
                                            CommandParameter="{Binding}">
                                            <Button.Template>
                                                <ControlTemplate TargetType="Button">
                                                    <Border
                                                        Background="{TemplateBinding Background}"
                                                        BorderBrush="Yellow"
                                                        BorderThickness=".2">
                                                        <!--  Additional styles for selected color  -->
                                                    </Border>
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <UniformGrid Columns="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type local:ColorPaletteControl}}, Path=Columns}" Rows="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type local:ColorPaletteControl}}, Path=Rows}" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                            </ItemsControl>
                        </Border>
                        <StackPanel
                            Grid.Row="1"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom">
                            <Border>
                                <TextBlock
                                    Margin="2,1,5,1"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Bottom"
                                    Panel.ZIndex="23"
                                    FontSize="15"
                                    FontWeight="Light"
                                    Foreground="{TemplateBinding Foreground}"
                                    Text="{Binding SelectedColor, NotifyOnSourceUpdated=True, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToNameConverter}}" />
                            </Border>

                        </StackPanel>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <!--  RGBColorPicker  -->
    <Style TargetType="{x:Type local:RgbColorPicker}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:RgbColorPicker}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />

                        </Grid.RowDefinitions>
                        <!--  Color preview  -->
                        <Border
                            Grid.Row="1"
                            Margin="3,3,2,3"
                            Background="{Binding SelectedColor, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrushConverter}}"
                            BorderBrush="Black"
                            BorderThickness="1" />

                        <!--  Color values  -->
                        <Grid Grid.Row="0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <!--  Red  -->

                            <Slider
                                Grid.Row="0"
                                Grid.Column="0"
                                MinWidth="100"
                                Margin="2"
                                HorizontalAlignment="Stretch"
                                Foreground="Red"
                                Maximum="255"
                                Minimum="0"
                                TickFrequency="5"
                                TickPlacement="BottomRight"
                                Value="{Binding Red, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                            <TextBlock
                                Grid.Row="0"
                                Grid.Column="1"
                                Margin="2"
                                Text="R" />
                            <TextBox
                                Grid.Row="0"
                                Grid.Column="2"
                                Width="65"
                                Text="{Binding Red, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />

                            <!--  Green  -->

                            <Slider
                                Grid.Row="1"
                                Grid.Column="0"
                                MinWidth="100"
                                Margin="2"
                                HorizontalAlignment="Stretch"
                                Foreground="Green"
                                Maximum="255"
                                Minimum="0"
                                TickFrequency="5"
                                TickPlacement="BottomRight"
                                Value="{Binding Green, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                            <TextBlock
                                Grid.Row="1"
                                Grid.Column="1"
                                Margin="2"
                                Text="G" />
                            <TextBox
                                Grid.Row="1"
                                Grid.Column="2"
                                Width="65"
                                Text="{Binding Green, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />

                            <!--  Blue  -->

                            <Slider
                                Grid.Row="2"
                                Grid.Column="0"
                                MinWidth="100"
                                Margin="2"
                                HorizontalAlignment="Stretch"
                                Foreground="Blue"
                                Maximum="255"
                                Minimum="0"
                                TickFrequency="5"
                                TickPlacement="BottomRight"
                                Value="{Binding Blue, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                            <TextBlock
                                Grid.Row="2"
                                Grid.Column="1"
                                Margin="2"
                                Text="B" />
                            <TextBox
                                Grid.Row="2"
                                Grid.Column="2"
                                Width="65"
                                Text="{Binding Blue, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />

                            <!--  Hexadecimal  -->


                            <TextBox
                                Grid.Row="3"
                                Margin="2"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Center"
                                IsReadOnly="True"
                                Text="{Binding Hexadecimal, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                            <TextBlock
                                Grid.Row="3"
                                Grid.Column="1"
                                Margin="2"
                                VerticalAlignment="Center"
                                Text="HEX" />

                        </Grid>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <!--  PropertyGrid  -->

    <Style TargetType="{x:Type local:PropertyGrid}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:PropertyGrid}">
                    <GroupBox
                        VerticalAlignment="{TemplateBinding VerticalAlignment}"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        ScrollViewer.VerticalScrollBarVisibility="Auto">
                        <GroupBox.Header>
                            <TextBlock
                                Margin="5"
                                FontSize="18"
                                Text="{Binding SelectedObjectName, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:PropertyGrid}}}" />
                        </GroupBox.Header>
                        <Grid>

                            <Grid Grid.Row="1">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="*" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <StackPanel Grid.Row="0" Orientation="Horizontal">
                                    <ToggleButton
                                        x:Name="CategorizedToggle"
                                        Margin="0,5,0,5"
                                        VerticalAlignment="Center"
                                        Command="{Binding ToggleCategorizedViewCommand, RelativeSource={RelativeSource AncestorType={x:Type local:PropertyGrid}}}"
                                        IsChecked="{TemplateBinding CategorizedView}">
                                        <TextBlock
                                            x:Name="TextBlockCategorized"
                                            Margin="5,0,5,0"
                                            VerticalAlignment="Center"
                                            FontFamily="Segoe UI"
                                            FontSize="11"
                                            Text="Categorized:" />
                                    </ToggleButton>
                                </StackPanel>
                                <local:CustomDataGrid
                                    x:Name="propertyDataGrid"
                                    Grid.Row="1"
                                    AlternationCount="2"
                                    AutoGenerateColumns="False"
                                    Background="{TemplateBinding CategoryBackground}"
                                    CanUserAddRows="False"
                                    CanUserDeleteRows="False"
                                    CanUserReorderColumns="False"
                                    CanUserResizeColumns="True"
                                    CanUserResizeRows="False"
                                    CanUserSortColumns="False"
                                    CategoryColor="{TemplateBinding CategoryBackground}"
                                    CategoryForeground="{TemplateBinding CategoryForeground}"
                                    HeadersVisibility="Column"
                                    HorizontalScrollBarVisibility="Disabled"
                                    IsReadOnly="False"
                                    ItemsSource="{Binding GroupedPropertyEntries, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:PropertyGrid}}}"
                                    SelectionMode="Single">
                                    <local:CustomDataGrid.Resources>
                                        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="{Binding CategoryBackground, Converter={StaticResource BrushToColorConverter}}" />
                                    </local:CustomDataGrid.Resources>
                                    <local:CustomDataGrid.RowStyle>
                                        <Style TargetType="DataGridRow">
                                            <Setter Property="Margin" Value="0,0,0,0" />
                                            <Style.Triggers>
                                                <Trigger Property="AlternationIndex" Value="1">
                                                    <Setter Property="Background" Value="{StaticResource RowAlternatingBackground}" />
                                                </Trigger>
                                                <Trigger Property="IsSelected" Value="True">
                                                    <Setter Property="Background" Value="{Binding CategoryBackground, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:PropertyGrid}}, Converter={StaticResource BrushToColorConverter}}" />

                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </local:CustomDataGrid.RowStyle>
                                    <local:CustomDataGrid.Columns>
                                        <DataGridTemplateColumn Width="*" Header="Property">
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <Grid x:Name="GridNameColumnGrid">
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="Auto" />
                                                            <RowDefinition Height="Auto" />
                                                        </Grid.RowDefinitions>
                                                        <TextBlock
                                                            x:Name="PropertyTextBlock"
                                                            Grid.Row="0"
                                                            Margin="0,0,0,0"
                                                            Padding="5,0,5,0"
                                                            VerticalAlignment="Center"
                                                            FontFamily="Segoe UI"
                                                            FontSize="14"
                                                            FontWeight="SemiBold"
                                                            Text="{Binding Name, Converter={StaticResource PropertyNameConverter}}"
                                                            ToolTip="{Binding Description}" />
                                                    </Grid>
                                                    <DataTemplate.Triggers>
                                                        <DataTrigger Binding="{Binding IsCategory}" Value="True">
                                                            <Setter TargetName="PropertyTextBlock" Property="Foreground" Value="{DynamicResource CategoryForeground}" />
                                                            <Setter TargetName="PropertyTextBlock" Property="Background" Value="{Binding CategoryBackground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type local:PropertyGrid}}}" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type DataGridRow}}, Path=IsSelected}" Value="True">
                                                            <Setter TargetName="GridNameColumnGrid" Property="Background" Value="{Binding CategoryBackground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type local:PropertyGrid}}}" />
                                                            <Setter TargetName="PropertyTextBlock" Property="Foreground" Value="{DynamicResource CategoryForeground}" />
                                                        </DataTrigger>
                                                    </DataTemplate.Triggers>
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>
                                        <DataGridTemplateColumn Width="*" Header="Value">
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding Value}" />
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                            <DataGridTemplateColumn.CellEditingTemplate>
                                                <DataTemplate>
                                                    <ContentControl Content="{Binding}" ContentTemplateSelector="{StaticResource PropertyGridValueTemplateSelector}" />
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellEditingTemplate>
                                        </DataGridTemplateColumn>
                                    </local:CustomDataGrid.Columns>
                                    <local:CustomDataGrid.GroupStyle>
                                        <GroupStyle>
                                            <GroupStyle.ContainerStyle>
                                                <Style TargetType="{x:Type GroupItem}">
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="{x:Type GroupItem}">
                                                                <Expander
                                                                    Width="{Binding ElementName=propertyDataGrid, Path=ActualWidth}"
                                                                    Background="{Binding CategoryBackground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type local:PropertyGrid}}}"
                                                                    IsExpanded="True">
                                                                    <Expander.Header>
                                                                        <TextBlock
                                                                            Margin="5,0,0,0"
                                                                            Padding="5"
                                                                            FontFamily="Segoe UI"
                                                                            FontSize="14"
                                                                            FontWeight="SemiBold"
                                                                            Foreground="{Binding RelativeSource={RelativeSource AncestorType={x:Type local:CustomDataGrid}}, Path=CategoryForeground}"
                                                                            Text="{Binding Name}" />
                                                                    </Expander.Header>
                                                                    <ItemsPresenter />
                                                                </Expander>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </GroupStyle.ContainerStyle>
                                        </GroupStyle>
                                    </local:CustomDataGrid.GroupStyle>
                                    <b:Interaction.Triggers>
                                        <b:EventTrigger EventName="SelectionChanged">
                                            <b:InvokeCommandAction Command="{Binding SelectionChangedCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:PropertyGrid}}}" CommandParameter="{Binding SelectedItem, ElementName=propertyDataGrid}" />
                                        </b:EventTrigger>
                                    </b:Interaction.Triggers>

                                </local:CustomDataGrid>
                                <StackPanel Grid.Row="2" MinHeight="45">
                                    <TextBlock
                                        Margin="8,3,5,2"
                                        FontSize="14"
                                        FontWeight="SemiBold"
                                        Text="{Binding SelectedEntry.Name, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:PropertyGrid}}}" />
                                    <TextBlock
                                        Margin="12,2,5,2"
                                        FontSize="11"
                                        FontStyle="Italic"
                                        FontWeight="Light"
                                        Text="{Binding SelectedEntry.Description, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:PropertyGrid}}, UpdateSourceTrigger=PropertyChanged}"
                                        TextWrapping="WrapWithOverflow" />
                                </StackPanel>
                            </Grid>
                        </Grid>
                    </GroupBox>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--  CustomDataGrid for PropertyGrid  -->
    <Style BasedOn="{StaticResource {x:Type DataGrid}}" TargetType="{x:Type local:CustomDataGrid}">
        <Setter Property="HeadersVisibility" Value="Column" />
        <Setter Property="CanUserAddRows" Value="False" />
        <Setter Property="RowBackground" Value="{StaticResource LightGrayBackgroundColor}" />
        <Setter Property="SelectionUnit" Value="FullRow" />
        <Setter Property="AlternatingRowBackground" Value="{StaticResource RowAlternatingBackground}" />
        <Setter Property="GridLinesVisibility" Value="Horizontal" />
        <Setter Property="HorizontalGridLinesBrush" Value="{StaticResource GrayBorderColor}" />
    </Style>
    <Style TargetType="{x:Type DataGridRowHeader}">
        <Setter Property="Visibility" Value="Collapsed" />
    </Style>


    <Style x:Key="RatingStarStyle" TargetType="{x:Type Path}">
        <Setter Property="Fill" Value="LightGray" />
        <Setter Property="Margin" Value="2" />
        <Setter Property="Data" Value="M463 192H315.9L271.2 58.6C269 52.1 262.9 48 256 48s-13 4.1-15.2 10.6L196.1 192H48c-8.8 0-16 7.2-16 16 0 .9.1 1.9.3 2.7.2 3.5 1.8 7.4 6.7 11.3l120.9 85.2-46.4 134.9c-2.3 6.5 0 13.8 5.5 18 2.9 2.1 5.6 3.9 9 3.9 3.3 0 7.2-1.7 10-3.6l118-84.1 118 84.1c2.8 2 6.7 3.6 10 3.6 3.4 0 6.1-1.7 8.9-3.9 5.6-4.2 7.8-11.4 5.5-18L352 307.2l119.9-86 2.9-2.5c2.6-2.8 5.2-6.6 5.2-10.7 0-8.8-8.2-16-17-16z" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding IsReadOnly, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=local:RatingControl}}" Value="False">
                <Setter Property="Cursor" Value="Hand" />
            </DataTrigger>
            <DataTrigger Binding="{Binding RatingValue, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=local:RatingControl}}" Value="0">
                <Setter Property="Fill" Value="LightGray" />
            </DataTrigger>
            <DataTrigger Binding="{Binding RatingValue, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=local:RatingControl}}" Value="1">
                <Setter Property="Fill" Value="Gold" />
            </DataTrigger>
            <DataTrigger Binding="{Binding RatingValue, RelativeSource={RelativeSource AncestorType=local:RatingControl}}" Value="2">
                <Setter Property="Fill" Value="Gold" />
            </DataTrigger>
            <DataTrigger Binding="{Binding RatingValue, RelativeSource={RelativeSource AncestorType=local:RatingControl}}" Value="3">
                <Setter Property="Fill" Value="Gold" />
            </DataTrigger>
            <DataTrigger Binding="{Binding RatingValue, RelativeSource={RelativeSource AncestorType=local:RatingControl}}" Value="4">
                <Setter Property="Fill" Value="Gold" />
            </DataTrigger>
            <DataTrigger Binding="{Binding RatingValue, RelativeSource={RelativeSource AncestorType=local:RatingControl}}" Value="5">
                <Setter Property="Fill" Value="Gold" />
            </DataTrigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="RatingHeartStyle" TargetType="{x:Type Path}">
        <Setter Property="Fill" Value="LightGray" />
        <Setter Property="Margin" Value="2" />
        <Setter Property="Data" Value="M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding IsReadOnly, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=local:RatingControl}}" Value="False">
                <Setter Property="Cursor" Value="Hand" />
            </DataTrigger>
            <DataTrigger Binding="{Binding RatingValue, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=local:RatingControl}}" Value="0">
                <Setter Property="Fill" Value="LightGray" />
            </DataTrigger>
            <DataTrigger Binding="{Binding RatingValue, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=local:RatingControl}}" Value="1">
                <Setter Property="Fill" Value="Red" />
            </DataTrigger>

            <DataTrigger Binding="{Binding RatingValue, RelativeSource={RelativeSource AncestorType=local:RatingControl}}" Value="3">
                <Setter Property="Fill" Value="Red" />
            </DataTrigger>
            <DataTrigger Binding="{Binding RatingValue, RelativeSource={RelativeSource AncestorType=local:RatingControl}}" Value="4">
                <Setter Property="Fill" Value="Red" />
            </DataTrigger>
            <DataTrigger Binding="{Binding RatingValue, RelativeSource={RelativeSource AncestorType=local:RatingControl}}" Value="5">
                <Setter Property="Fill" Value="Red" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
    <Style x:Key="RatingTomatoeStyle" TargetType="{x:Type Path}">
        <Setter Property="Fill" Value="LightGray" />
        <Setter Property="Margin" Value="2" />
        <Setter Property="Data" Value="M5.866 0L4.335 1.262l2.082 1.8c-2.629-.989-4.842 1.4-5.012 2.338 1.384-.323 2.24-.422 3.344-.335-7.042 4.634-4.978 13.148-1.434 16.094 5.784 4.612 13.77 3.202 17.91-1.316C27.26 13.363 22.993.65 10.86 2.766c.107-1.17.633-1.503 1.243-1.602-.89-1.493-3.67-.734-4.556 1.374C7.52 2.602 5.866 0 5.866 0zM4.422 7.217H6.9c2.673 0 2.898.012 3.55.202 1.06.307 1.868.973 2.313 1.904.05.106.092.206.13.305l7.623.008.027 2.912-2.745-.024v7.549l-2.982-.016v-7.522l-2.127.016a2.92 2.92 0 0 1-1.056 1.134c-.287.176-.3.19-.254.264.127.2 2.125 3.642 2.125 3.659l-3.39.019-2.013-3.376c-.034-.047-.122-.068-.344-.084l-.297-.02.037 3.48-3.075-.038zm3.016 2.288l.024.338c.014.186.024.729.024 1.206v.867l.582-.025c.32-.013.695-.049.833-.078.694-.146 1.048-.478 1.087-1.018.027-.378-.063-.636-.303-.87-.318-.309-.761-.416-1.733-.418Z" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding IsReadOnly, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=local:RatingControl}}" Value="False">
                <Setter Property="Cursor" Value="Hand" />
            </DataTrigger>
            <DataTrigger Binding="{Binding RatingValue, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=local:RatingControl}}" Value="0">
                <Setter Property="Fill" Value="Green" />
            </DataTrigger>
            <DataTrigger Binding="{Binding RatingValue, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=local:RatingControl}}" Value="1">
                <Setter Property="Fill" Value="Tomato" />
            </DataTrigger>
            <DataTrigger Binding="{Binding RatingValue, RelativeSource={RelativeSource AncestorType=local:RatingControl}}" Value="2">
                <Setter Property="Fill" Value="Tomato" />
            </DataTrigger>
            <DataTrigger Binding="{Binding RatingValue, RelativeSource={RelativeSource AncestorType=local:RatingControl}}" Value="3">
                <Setter Property="Fill" Value="Tomato" />
            </DataTrigger>
            <DataTrigger Binding="{Binding RatingValue, RelativeSource={RelativeSource AncestorType=local:RatingControl}}" Value="4">
                <Setter Property="Fill" Value="Tomato" />
            </DataTrigger>
            <DataTrigger Binding="{Binding RatingValue, RelativeSource={RelativeSource AncestorType=local:RatingControl}}" Value="5">
                <Setter Property="Fill" Value="Tomato" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
    <Style x:Key="RatingCloverStyle" TargetType="{x:Type Path}">
        <Setter Property="Fill" Value="LightGray" />
        <Setter Property="Margin" Value="2" />
        <Setter Property="Data" Value="M12,11.18C15.3,8.18 17,6.64 17,4.69C17,3.19 15.75,2 14.25,2C13.39,2 12.57,2.36 12,3C11.43,2.36 10.61,2 9.69,2C8.19,2 7,3.25 7,4.75C7,6.64 8.7,8.18 12,11.18M11.18,12C8.18,8.7 6.64,7 4.69,7C3.19,7 2,8.25 2,9.75C2,10.61 2.36,11.43 3,12C2.36,12.57 2,13.39 2,14.31C2,15.81 3.25,17 4.75,17C6.64,17 8.18,15.3 11.18,12M12.83,12C15.82,15.3 17.36,17 19.31,17C20.81,17 22,15.75 22,14.25C22,13.39 21.64,12.57 21,12C21.64,11.43 22,10.61 22,9.69C22,8.19 20.75,7 19.25,7C17.36,7 15.82,8.7 12.83,12M12,12.82C8.7,15.82 7,17.36 7,19.31C7,20.81 8.25,22 9.75,22C10.61,22 11.43,21.64 12,21C12.57,21.64 13.39,22 14.31,22C15.81,22 17,20.75 17,19.25C17,17.36 15.3,15.82 12,12.82Z" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding IsReadOnly, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=local:RatingControl}}" Value="False">
                <Setter Property="Cursor" Value="Hand" />
            </DataTrigger>
            <DataTrigger Binding="{Binding RatingValue, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=local:RatingControl}}" Value="0">
                <Setter Property="Fill" Value="Green" />
            </DataTrigger>
            <DataTrigger Binding="{Binding RatingValue, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=local:RatingControl}}" Value="1">
                <Setter Property="Fill" Value="Brown" />
            </DataTrigger>
            <DataTrigger Binding="{Binding RatingValue, RelativeSource={RelativeSource AncestorType=local:RatingControl}}" Value="2">
                <Setter Property="Fill" Value="Brown" />
            </DataTrigger>
            <DataTrigger Binding="{Binding RatingValue, RelativeSource={RelativeSource AncestorType=local:RatingControl}}" Value="3">
                <Setter Property="Fill" Value="Brown" />
            </DataTrigger>
            <DataTrigger Binding="{Binding RatingValue, RelativeSource={RelativeSource AncestorType=local:RatingControl}}" Value="4">
                <Setter Property="Fill" Value="Brown" />
            </DataTrigger>
            <DataTrigger Binding="{Binding RatingValue, RelativeSource={RelativeSource AncestorType=local:RatingControl}}" Value="5">
                <Setter Property="Fill" Value="Brown" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
    <Style x:Key="HeartControlStyle" TargetType="{x:Type local:RatingControl}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:RatingControl}">
                    <Grid>
                        <Viewbox>
                            <StackPanel Orientation="Horizontal">
                                <Path
                                    x:Name="Star1"
                                    Style="{StaticResource RatingHeartStyle}"
                                    Tag="1">
                                    <b:Interaction.Triggers>
                                        <b:EventTrigger EventName="MouseEnter">
                                            <b:InvokeCommandAction Command="{Binding MouseOverCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" />
                                        </b:EventTrigger>
                                        <b:EventTrigger EventName="MouseLeftButtonDown">
                                            <b:InvokeCommandAction Command="{Binding ClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" CommandParameter="{Binding ElementName=Star1}" />
                                        </b:EventTrigger>
                                    </b:Interaction.Triggers>
                                </Path>
                                <Path
                                    x:Name="Star2"
                                    Style="{StaticResource RatingHeartStyle}"
                                    Tag="2">
                                    <b:Interaction.Triggers>
                                        <b:EventTrigger EventName="MouseEnter">
                                            <b:InvokeCommandAction Command="{Binding MouseOverCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" />
                                        </b:EventTrigger>
                                        <b:EventTrigger EventName="MouseLeftButtonDown">
                                            <b:InvokeCommandAction Command="{Binding ClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" CommandParameter="{Binding ElementName=Star2}" />
                                        </b:EventTrigger>
                                    </b:Interaction.Triggers>
                                </Path>
                                <Path
                                    x:Name="Star3"
                                    Style="{StaticResource RatingHeartStyle}"
                                    Tag="3">
                                    <b:Interaction.Triggers>
                                        <b:EventTrigger EventName="MouseEnter">
                                            <b:InvokeCommandAction Command="{Binding MouseOverCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" />
                                        </b:EventTrigger>
                                        <b:EventTrigger EventName="MouseLeftButtonDown">
                                            <b:InvokeCommandAction Command="{Binding ClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" CommandParameter="{Binding ElementName=Star3}" />
                                        </b:EventTrigger>
                                    </b:Interaction.Triggers>
                                </Path>
                                <Path
                                    x:Name="Star4"
                                    Style="{StaticResource RatingHeartStyle}"
                                    Tag="4">
                                    <b:Interaction.Triggers>
                                        <b:EventTrigger EventName="MouseEnter">
                                            <b:InvokeCommandAction Command="{Binding MouseOverCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" />
                                        </b:EventTrigger>
                                        <b:EventTrigger EventName="MouseLeftButtonDown">
                                            <b:InvokeCommandAction Command="{Binding ClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" CommandParameter="{Binding ElementName=Star4}" />
                                        </b:EventTrigger>
                                    </b:Interaction.Triggers>
                                </Path>
                                <Path
                                    x:Name="Star5"
                                    Style="{StaticResource RatingHeartStyle}"
                                    Tag="5">
                                    <b:Interaction.Triggers>
                                        <b:EventTrigger EventName="MouseEnter">
                                            <b:InvokeCommandAction Command="{Binding MouseOverCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" />
                                        </b:EventTrigger>
                                        <b:EventTrigger EventName="MouseLeftButtonDown">
                                            <b:InvokeCommandAction Command="{Binding ClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" CommandParameter="{Binding ElementName=Star5}" />
                                        </b:EventTrigger>
                                    </b:Interaction.Triggers>
                                </Path>
                            </StackPanel>
                        </Viewbox>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="TomatoeControlStyle" TargetType="{x:Type local:RatingControl}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:RatingControl}">
                    <Grid>
                        <Viewbox>
                            <StackPanel Orientation="Horizontal">
                                <Path
                                    x:Name="Star1"
                                    Style="{StaticResource RatingTomatoeStyle}"
                                    Tag="1">
                                    <b:Interaction.Triggers>
                                        <b:EventTrigger EventName="MouseEnter">
                                            <b:InvokeCommandAction Command="{Binding MouseOverCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" />
                                        </b:EventTrigger>
                                        <b:EventTrigger EventName="MouseLeftButtonDown">
                                            <b:InvokeCommandAction Command="{Binding ClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" CommandParameter="{Binding ElementName=Star1}" />
                                        </b:EventTrigger>
                                    </b:Interaction.Triggers>
                                </Path>
                                <Path
                                    x:Name="Star2"
                                    Style="{StaticResource RatingTomatoeStyle}"
                                    Tag="2">
                                    <b:Interaction.Triggers>
                                        <b:EventTrigger EventName="MouseEnter">
                                            <b:InvokeCommandAction Command="{Binding MouseOverCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" />
                                        </b:EventTrigger>
                                        <b:EventTrigger EventName="MouseLeftButtonDown">
                                            <b:InvokeCommandAction Command="{Binding ClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" CommandParameter="{Binding ElementName=Star2}" />
                                        </b:EventTrigger>
                                    </b:Interaction.Triggers>
                                </Path>
                                <Path
                                    x:Name="Star3"
                                    Style="{StaticResource RatingTomatoeStyle}"
                                    Tag="3">
                                    <b:Interaction.Triggers>
                                        <b:EventTrigger EventName="MouseEnter">
                                            <b:InvokeCommandAction Command="{Binding MouseOverCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" />
                                        </b:EventTrigger>
                                        <b:EventTrigger EventName="MouseLeftButtonDown">
                                            <b:InvokeCommandAction Command="{Binding ClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" CommandParameter="{Binding ElementName=Star3}" />
                                        </b:EventTrigger>
                                    </b:Interaction.Triggers>
                                </Path>
                                <Path
                                    x:Name="Star4"
                                    Style="{StaticResource RatingTomatoeStyle}"
                                    Tag="4">
                                    <b:Interaction.Triggers>
                                        <b:EventTrigger EventName="MouseEnter">
                                            <b:InvokeCommandAction Command="{Binding MouseOverCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" />
                                        </b:EventTrigger>
                                        <b:EventTrigger EventName="MouseLeftButtonDown">
                                            <b:InvokeCommandAction Command="{Binding ClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" CommandParameter="{Binding ElementName=Star4}" />
                                        </b:EventTrigger>
                                    </b:Interaction.Triggers>
                                </Path>
                                <Path
                                    x:Name="Star5"
                                    Style="{StaticResource RatingTomatoeStyle}"
                                    Tag="5">
                                    <b:Interaction.Triggers>
                                        <b:EventTrigger EventName="MouseEnter">
                                            <b:InvokeCommandAction Command="{Binding MouseOverCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" />
                                        </b:EventTrigger>
                                        <b:EventTrigger EventName="MouseLeftButtonDown">
                                            <b:InvokeCommandAction Command="{Binding ClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" CommandParameter="{Binding ElementName=Star5}" />
                                        </b:EventTrigger>
                                    </b:Interaction.Triggers>
                                </Path>
                            </StackPanel>
                        </Viewbox>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="CloverControlStyle" TargetType="{x:Type local:RatingControl}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:RatingControl}">
                    <Grid>
                        <Viewbox>
                            <StackPanel Orientation="Horizontal">
                                <Path
                                    x:Name="Star1"
                                    Style="{StaticResource RatingCloverStyle}"
                                    Tag="1">
                                    <b:Interaction.Triggers>
                                        <b:EventTrigger EventName="MouseEnter">
                                            <b:InvokeCommandAction Command="{Binding MouseOverCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" />
                                        </b:EventTrigger>
                                        <b:EventTrigger EventName="MouseLeftButtonDown">
                                            <b:InvokeCommandAction Command="{Binding ClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" CommandParameter="{Binding ElementName=Star1}" />
                                        </b:EventTrigger>
                                    </b:Interaction.Triggers>
                                </Path>
                                <Path
                                    x:Name="Star2"
                                    Style="{StaticResource RatingCloverStyle}"
                                    Tag="2">
                                    <b:Interaction.Triggers>
                                        <b:EventTrigger EventName="MouseEnter">
                                            <b:InvokeCommandAction Command="{Binding MouseOverCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" />
                                        </b:EventTrigger>
                                        <b:EventTrigger EventName="MouseLeftButtonDown">
                                            <b:InvokeCommandAction Command="{Binding ClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" CommandParameter="{Binding ElementName=Star2}" />
                                        </b:EventTrigger>
                                    </b:Interaction.Triggers>
                                </Path>
                                <Path
                                    x:Name="Star3"
                                    Style="{StaticResource RatingCloverStyle}"
                                    Tag="3">
                                    <b:Interaction.Triggers>
                                        <b:EventTrigger EventName="MouseEnter">
                                            <b:InvokeCommandAction Command="{Binding MouseOverCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" />
                                        </b:EventTrigger>
                                        <b:EventTrigger EventName="MouseLeftButtonDown">
                                            <b:InvokeCommandAction Command="{Binding ClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" CommandParameter="{Binding ElementName=Star3}" />
                                        </b:EventTrigger>
                                    </b:Interaction.Triggers>
                                </Path>
                                <Path
                                    x:Name="Star4"
                                    Style="{StaticResource RatingCloverStyle}"
                                    Tag="4">
                                    <b:Interaction.Triggers>
                                        <b:EventTrigger EventName="MouseEnter">
                                            <b:InvokeCommandAction Command="{Binding MouseOverCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" />
                                        </b:EventTrigger>
                                        <b:EventTrigger EventName="MouseLeftButtonDown">
                                            <b:InvokeCommandAction Command="{Binding ClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" CommandParameter="{Binding ElementName=Star4}" />
                                        </b:EventTrigger>
                                    </b:Interaction.Triggers>
                                </Path>
                                <Path
                                    x:Name="Star5"
                                    Style="{StaticResource RatingCloverStyle}"
                                    Tag="5">
                                    <b:Interaction.Triggers>
                                        <b:EventTrigger EventName="MouseEnter">
                                            <b:InvokeCommandAction Command="{Binding MouseOverCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" />
                                        </b:EventTrigger>
                                        <b:EventTrigger EventName="MouseLeftButtonDown">
                                            <b:InvokeCommandAction Command="{Binding ClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" CommandParameter="{Binding ElementName=Star5}" />
                                        </b:EventTrigger>
                                    </b:Interaction.Triggers>
                                </Path>
                            </StackPanel>
                        </Viewbox>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type local:RatingControl}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:RatingControl}">
                    <Grid>
                        <Viewbox>
                            <StackPanel Orientation="Horizontal">

                                <Path
                                    x:Name="Star1"
                                    Style="{StaticResource RatingStarStyle}"
                                    Tag="1">
                                    <b:Interaction.Triggers>
                                        <b:EventTrigger EventName="MouseEnter">
                                            <b:InvokeCommandAction Command="{Binding MouseOverCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" />
                                        </b:EventTrigger>
                                        <b:EventTrigger EventName="MouseLeftButtonDown">
                                            <b:InvokeCommandAction Command="{Binding ClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" CommandParameter="{Binding ElementName=Star1}" />
                                        </b:EventTrigger>
                                    </b:Interaction.Triggers>
                                </Path>
                                <Path
                                    x:Name="Star2"
                                    Style="{StaticResource RatingStarStyle}"
                                    Tag="2">
                                    <b:Interaction.Triggers>
                                        <b:EventTrigger EventName="MouseEnter">
                                            <b:InvokeCommandAction Command="{Binding MouseOverCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" />
                                        </b:EventTrigger>
                                        <b:EventTrigger EventName="MouseLeftButtonDown">
                                            <b:InvokeCommandAction Command="{Binding ClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" CommandParameter="{Binding ElementName=Star2}" />
                                        </b:EventTrigger>
                                    </b:Interaction.Triggers>
                                </Path>
                                <Path
                                    x:Name="Star3"
                                    Style="{StaticResource RatingStarStyle}"
                                    Tag="3">
                                    <b:Interaction.Triggers>
                                        <b:EventTrigger EventName="MouseEnter">
                                            <b:InvokeCommandAction Command="{Binding MouseOverCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" />
                                        </b:EventTrigger>
                                        <b:EventTrigger EventName="MouseLeftButtonDown">
                                            <b:InvokeCommandAction Command="{Binding ClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" CommandParameter="{Binding ElementName=Star3}" />
                                        </b:EventTrigger>
                                    </b:Interaction.Triggers>
                                </Path>
                                <Path
                                    x:Name="Star4"
                                    Style="{StaticResource RatingStarStyle}"
                                    Tag="4">
                                    <b:Interaction.Triggers>
                                        <b:EventTrigger EventName="MouseEnter">
                                            <b:InvokeCommandAction Command="{Binding MouseOverCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" />
                                        </b:EventTrigger>
                                        <b:EventTrigger EventName="MouseLeftButtonDown">
                                            <b:InvokeCommandAction Command="{Binding ClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" CommandParameter="{Binding ElementName=Star4}" />
                                        </b:EventTrigger>
                                    </b:Interaction.Triggers>
                                </Path>
                                <Path
                                    x:Name="Star5"
                                    Style="{StaticResource RatingStarStyle}"
                                    Tag="5">
                                    <b:Interaction.Triggers>
                                        <b:EventTrigger EventName="MouseEnter">
                                            <b:InvokeCommandAction Command="{Binding MouseOverCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" />
                                        </b:EventTrigger>
                                        <b:EventTrigger EventName="MouseLeftButtonDown">
                                            <b:InvokeCommandAction Command="{Binding ClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:RatingControl}}}" CommandParameter="{Binding ElementName=Star5}" />
                                        </b:EventTrigger>
                                    </b:Interaction.Triggers>
                                </Path>
                            </StackPanel>
                        </Viewbox>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style BasedOn="{StaticResource {x:Type TextBox}}" TargetType="{x:Type local:WatermarkTextBox}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:WatermarkTextBox}">
                    <Border
                        Padding="{TemplateBinding Padding}"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                        <Grid>
                            <TextBox
                                x:Name="PART_TextBox"
                                Background="Transparent"
                                Text="{TemplateBinding Text}" />
                            <TextBlock
                                x:Name="PART_Watermark"
                                Margin="3,1,0,0"
                                Foreground="{TemplateBinding Foreground}"
                                IsHitTestVisible="False"
                                Opacity="{TemplateBinding WatermarkOpacity}"
                                Text="{TemplateBinding WatermarkText}"
                                Visibility="Collapsed" />
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger SourceName="PART_TextBox" Property="Text" Value="">
                            <Setter TargetName="PART_Watermark" Property="Visibility" Value="Visible" />
                        </Trigger>
                        <Trigger SourceName="PART_TextBox" Property="Text" Value="{x:Null}">
                            <Setter TargetName="PART_Watermark" Property="Visibility" Value="Visible" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>



            </Setter.Value>
        </Setter>
    </Style>


    <Style TargetType="{x:Type local:NumericUpDown}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:NumericUpDown}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <TextBox
                            Grid.Column="0"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Center"
                            Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Value, UpdateSourceTrigger=PropertyChanged}" />

                        <StackPanel Grid.Column="1" Orientation="Horizontal">


                            <Button
                                x:Name="PART_DecreaseButton"
                                Width="20"
                                Height="20"
                                Margin="2"
                                Padding="2"
                                Content="↓" />
                            <Button
                                x:Name="PART_IncreaseButton"
                                Width="20"
                                Height="20"
                                Margin="2"
                                Padding="2"
                                Content="↑" />
                        </StackPanel>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="{x:Type local:CollectionControlDialog}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:CollectionControlDialog}">
                    <Border
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <ListBox
                                Grid.Row="0"
                                ItemsSource="{Binding ItemsSource, RelativeSource={RelativeSource TemplatedParent}}"
                                SelectedItem="{Binding SelectedItem, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />

                            <StackPanel Grid.Row="1" Orientation="Horizontal">
                                <Button
                                    Width="75"
                                    Margin="5"
                                    Command="{Binding AddCommand, RelativeSource={RelativeSource TemplatedParent}}"
                                    Content="Add" />
                                <Button
                                    Width="75"
                                    Margin="5"
                                    Command="{Binding RemoveCommand, RelativeSource={RelativeSource TemplatedParent}}"
                                    Content="Remove" />
                            </StackPanel>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>
